<template>
  <div class="content col-12">
    <div class="container-sm">
      <div class="overview row">
        <div class="description col-xl-8 col-lg-6">
          <div class="container-content">
            <div class="desc-time">Latest Update: February 10, 2021</div>
            <div class="desc-title">
              <h1>Responsive Web Developer</h1>
            </div>
            <div
              class="short-desc"
              v-if="data.challengeCategory"
              v-html="data.challengeCategory.description"
            ></div>
            <div id="desc-box" class="desc-box1">
              <div class="box-title">
                <h5>For those who want to:</h5>
              </div>
              <ul id="box-list" class="box1-list">
                <li>Start with <strong>Coding</strong></li>
                <li>
                  Practice <strong>HTML, CSS, and basic JavaScript</strong>
                </li>
                <li>
                  Building websites with <strong> real-life practices.</strong>
                </li>
              </ul>
            </div>
            <div id="desc-box" class="desc-box2">
              <div class="box-title">
                <h5>Rules:</h5>
              </div>
              <ul id="box-list" class="box2-list">
                <li>
                  âœ…<strong> Recommend</strong> to use only HTML, CSS, and
                  JavaScript
                </li>
                <li>âœ…<strong> Fulfill</strong> all the user stories</li>
                <li>
                  âœ…<strong> Follow the design,</strong> you can add animations,
                  change images,...
                </li>
                <li>ðŸš«<strong> Do not copy</strong> existing solutions</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="require col-xl-4 col-lg-6">
          <div class="container-content">
            <div class="require-image">
              <img
                v-if="data.challengeCategory"
                :src="'/' + data.challengeCategory.image"
                alt="error"
              />
            </div>
            <div class="require-title">
              <h5>Certificate Requirements</h5>
            </div>
            <ul class="list-require">
              <li>Completed 8 challenges</li>
            </ul>
            <div v-if="data.challengeCategory" class="progres">
              <h5>Progress</h5>
              <p>
                {{ ChallengeToUser }} /
                {{ data.challengeCategory.challenges.length }} completed
              </p>
              <div class="progres-level">
                <div
                  class="progres-level-item-active"
                  v-for="(item, index) in ChallengeToUser"
                  :key="index"
                ></div>
                <div
                  class="progres-level-item"
                  v-for="(challenge, index) in currentChallenges-ChallengeToUser"
                  :key="index"
                ></div>
              </div>
            </div>

            <div class="apply-button">
              <button>APPLY FOR CERTIFICATE</button>
            </div>
          </div>
        </div>
      </div>
      <div v-if="data.challengeCategory" class="product">
        <div class="product-title">
          <h2>Products you will build</h2>
          <div class="list-product row">
            <div
              v-for="challenge in data.challengeCategory.challenges"
              :key="challenge.id"
              class="product-item col-xl-4 col-md-6"
            >
              <router-link
                :to="{ name: 'chanllenge', params: { slug: challenge.slug } }"
              >
                <div class="product-content">
                  <div class="product-image">
                    <img :src="'/' + challenge.challenge_image" alt="" />
                  </div>
                  <div class="product-content-title">
                    {{ challenge.title }}
                  </div>
                  <div
                    v-html="challenge.description.substring(0, 150) + ' ...'"
                    class="product-desc"
                  ></div>
                  <div class="product-level">
                    <div class="product-level-name">
                      <p>Beginner</p>
                    </div>
                    <div class="product-level-main">
                      <div
                        v-for="level in challenge.level"
                        :key="level"
                        class="product-level-item"
                      ></div>
                    </div>
                  </div>
                </div>
              </router-link>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>


<script>
import { mapGetters } from "vuex";
import axios from "axios";
export default {
  data: () => ({
    title: "Chi Tiet Danh Muc Thu Thach",
    ChallengeToUser: 0,
    currentChallenges: 0,
  }),
  computed: mapGetters({
    data: "challengecategory/challengecategory",
  }),
  watch: {
    data: function () {
      if (
        this.data.challengeUser != undefined &&
        this.data.challengeCategory != undefined
      ) {
        this.currentChallenges = this.data.challengeCategory.challenges.length ;
        this.getChallengeToUser();
      }
    },
  },
  created() {
    this.$store.dispatch(
      "challengecategory/get_One_Data",
      this.$route.params.slug
    );
  },
  methods: {
    getChallengeToUser() {
      const challengeUser = this.data.challengeUser;
      const challenges = this.data.challengeCategory.challenges;
      challengeUser.forEach((challengeUserItem) => {
        challenges.forEach((challengesItem) => {
          if (challengeUserItem.challen_id == challengesItem.id) {
            this.ChallengeToUser++;
          }
        });
      });
    },
  },
};
</script>

<style lang="scss">
@import "../../../sass/overview.scss";
</style>
